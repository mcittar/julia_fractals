{"version":3,"sources":["webpack:///webpack/bootstrap 52616932873226a8002b","webpack:///./lib/root.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;;;AAGA;AACA;AACA;AACA,MAAM,mDAAmD;AACzD,MAAM,uDAAuD;AAC7D;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 52616932873226a8002b","document.addEventListener(\"DOMContentLoaded\", function(event) {\n\n  let surface = document.getElementById('rendering-surface');\n  surface.addEventListener('mousemove', onMouseMove);\n  var gl = surface.getContext('experimental-webgl');\n  gl.viewport(0,0,surface.width,surface.height);\n  gl.clearColor(1.0, 0.0, 0.0, 1.0);\n\n  initWebGL(gl);\n\n  function onMouseMove(e) {\n    let pos = getMousePos(e);\n    let widthHalved = surface.width / 2;\n    let heightHalved = surface.height / 2;\n    let constantReal = pos.x / surface.width * 2 - 1;\n    let constantImaginary = 1 - pos.y / surface.height * 2;\n    options = [constantReal, constantImaginary];\n  }\n\n  function getMousePos(e) {\n    let rect = surface.getBoundingClientRect();\n    return {\n      x: Math.round((e.clientX - rect.left) / (rect.right - rect.left) * surface.width),\n      y: Math.round((e.clientY - rect.top) / (rect.bottom - rect.top) * surface.height)\n    };\n  }\n});\n\nvar options = [-0.221, -0.713];\nfunction render(gl,scene) {\n  gl.clear(gl.COLOR_BUFFER_BIT);\n  gl.useProgram(scene.program);\n\n  gl.activeTexture(gl.TEXTURE0);\n  gl.bindTexture(gl.TEXTURE_2D, paletteTexture);\n  gl.uniform1i(scene.program.samplerUniform, 0);\n\n  gl.uniform2fv(scene.program.cUniform, new Float32Array(options));\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, scene.object.vertexBuffer);\n  gl.drawArrays(\n    scene.object.primitiveType, 0,\n    scene.object.vertexCount);\n  gl.bindBuffer(gl.ARRAY_BUFFER, null);\n  gl.useProgram(null);\n  requestAnimationFrame(function() {\n    render(gl,scene);\n  });\n}\n\nvar paletteTexture;\nfunction initTextures(gl) {\n  paletteTexture = gl.createTexture();\n  paletteTexture.image = new Image();\n  paletteTexture.image.onload = function() {\n    handleLoadedTexture(gl, paletteTexture);\n  };\n  paletteTexture.image.src = \"./textures/greens.png\";\n}\n\nfunction handleLoadedTexture(gl, texture) {\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture.image);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n  gl.bindTexture(gl.TEXTURE_2D, null); //unbind\n}\n\n\nfunction initWebGL(gl) {\n  var program = createProgram(\n    gl,\n    [{container: 'vertex-shader', type: gl.VERTEX_SHADER},\n     {container: 'fragment-shader', type: gl.FRAGMENT_SHADER}]\n  );\n\n  gl.useProgram(program);\n\n  var quadVtx = [\n    -1,\t-1, 0,\n    1,\t-1,\t0,\n    1,\t1,\t0,\n    -1,\t-1, 0,\n    -1,\t1,\t0,\n    1,\t1,\t0,\n  ];\n\n  let quadbuffer_vtx = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, quadbuffer_vtx);\n  gl.enableVertexAttribArray(program.vtxPosAttrib);\n  gl.vertexAttribPointer(program.vtxPosAttrib, 3, gl.FLOAT, false, 0, 0);\n  quadbuffer_vtx.itemSize = 3;\n  quadbuffer_vtx.numItems = quadVtx.length / quadbuffer_vtx.itemSize;\n\n  gl.bufferData(\n    gl.ARRAY_BUFFER,\n    new Float32Array(quadVtx),\n    gl.STATIC_DRAW\n  );\n\n  var quadUV = [\n    0,\t0,\n    1,\t0,\n    1,\t1,\n    0,\t0,\n    0,\t1,\n    1,\t1,\n  ];\n\n  let quadbuffer_uv = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, quadbuffer_uv);\n  gl.enableVertexAttribArray(program.vtxUVAttrib);\n  gl.vertexAttribPointer(program.vtxUVAttrib, 2, gl.FLOAT, false, 0, 0);\n  quadbuffer_uv.itemSize = 2;\n  quadbuffer_uv.numItems = quadUV.length / quadbuffer_uv.itemSize;\n\n  gl.bufferData(\n    gl.ARRAY_BUFFER,\n    new Float32Array(quadUV),\n    gl.STATIC_DRAW\n  );\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, null);\n  gl.useProgram(null);\n\n  var square = {\n    vertexCount: quadbuffer_vtx.numItems,\n    primitiveType: gl.TRIANGLES\n  };\n\n  square.vertexBuffer = quadbuffer_vtx;\n\n  var scene = {\n    program: program,\n    object: square,\n  };\n\n  initTextures(gl);\n\n  requestAnimationFrame(function() {\n    render(gl, scene);\n  });\n}\n\nfunction createProgram(gl, shaderSpecs) {\n  var program = gl.createProgram();\n  for ( var i = 0 ; i < shaderSpecs.length ; i++ ) {\n    var spec = shaderSpecs[i];\n    var shader = gl.createShader(spec.type);\n    var source = document.getElementById(spec.container).text;\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      throw gl.getShaderInfoLog(shader);\n    }\n    gl.attachShader(program, shader);\n    gl.deleteShader(shader);\n  }\n  gl.linkProgram(program);\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    throw gl.getProgramInfoLog(program);\n  }\n  program.vtxPosAttribute = gl.getAttribLocation(program, 'vtx_pos');\n  program.vtxUVAttrib = gl.getAttribLocation(program, \"vtx_uv\");\n  program.samplerUniform = gl.getUniformLocation(program, \"uSampler\");\n  program.cUniform = gl.getUniformLocation(program, \"c\");\n\n  return program;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/root.js\n// module id = 0\n// module chunks = 0"],"sourceRoot":""}